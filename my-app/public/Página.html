<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="kiablanco.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMDV</title>
    <link rel="stylesheet" href="/Css/style_pagina.css">
    <script src="JavaScrip/auth.js" defer></script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="Página.html" target="_blank">
                    <img src="1/kiablanco.png" alt="KIA Logo">
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="inicio.html">Inicio</a></li>
                <li><a href="Videojuego.html">Videojuego</a></li>
                <li><a href="compensaciones.html">Compensaciones</a></li>
                <li><a href="calendario.html">Calendario</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
            <div class="top-right-links">
                <a href="index.html" id="cerrarSesionBtn">Cerrar Sesión</a>
            </div>
        <script>  
            document.getElementById('cerrarSesionBtn').addEventListener('click', async () => {
            // Definir los datos que se enviarán al servidor
            const FechaDeSalida = new Date().toISOString(); // Fecha actual en formato ISO
            const IdSalida = document.getElementById('userId').value; // Obtener el ID del usuario desde el DOM (asegúrate de tener un campo oculto o similar)

            try {
                const response = await fetch('/CerrarSesion', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ FechaDeSalida, IdSalida }),
                });

                const resultado = document.getElementById('resultado');
                if (response.ok) {
                    resultado.textContent = 'Sesión cerrada correctamente';
                    // Redireccionar a la página de inicio u otra página
                    setTimeout(() => {
                        window.location.href = '/inicio'; // Cambia esto a la URL deseada
                    }, 2000); // Redireccionar después de 2 segundos
                } else {
                    const errorText = await response.text();
                    resultado.textContent = `Error: ${errorText}`;
                }
            } catch (error) {
                console.error('Error en la solicitud:', error);
                document.getElementById('resultado').textContent = 'Error al cerrar sesión. Por favor, inténtalo de nuevo.';
            }
        }); 
        </script>  
        
        </nav>
    </header>
    <main>
        <section class="slogan">
            <h1>¡Bienvenido al apartado de compensaciones de KIA Motors!</h1>
            <h2>Aquí encontrarás diversos recordatorios sobre tus beneficios como parte de esta gran familia</h2>
        </section>


        <section class="banner">
            <div class="banner-content">
                <div class="text">
                    <h1>K4 Sedán</h1>
                    <p>De lo ordinario a lo extraordinario</p>
                </div>
                <div class="image">
                    <img src="1/K4SEDAN.jpg" alt="K4SEDAN">
                </div>
            </div>
        </section>


        <section class="chatbox">
            <p>¿Necesitas ayuda? ¡Estamos aquí para ayudarte!</p>
            <button class="chat-button">Chatear Ahora</button>
        </section>
    </main>


    <footer>
        <p>Este sitio utiliza cookies para mejorar tu experiencia de usuario. Para más información consulta nuestra <a href="#">Política de Cookies</a>.</p>
    </footer>
   

</body>
</html>
